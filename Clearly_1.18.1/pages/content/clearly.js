function Clearly(t,e,i){if(e&&e.documentElement)t=e,e=arguments[2];else if(!t||!t.documentElement)throw new Error("First argument to Clearly constructor should be a document object.");if(e=e||{},this._doc=t,this._articleTitle=null,this._articleByline=null,this._articleAuthorName=null,this._articleDir=null,this._attempts=[],this._outlineIndex=0,i&&"object"==typeof i){Object.assign(this,i),["REGEXPS","LANG_REGEXPS"].forEach(t=>{const e=this[t];Object.keys(e).forEach(t=>{const i=e[t];if("string"==typeof i){const n=i.match(/^\/(.*)\/([a-z]*)$/);n&&(e[t]=new RegExp(n[1],n[2]))}})})}this._debug=!!e.debug,this._maxElemsToParse=e.maxElemsToParse||this.DEFAULT_MAX_ELEMS_TO_PARSE,this._nbTopCandidates=e.nbTopCandidates||this.DEFAULT_N_TOP_CANDIDATES,this._charThreshold=e.charThreshold||this.DEFAULT_CHAR_THRESHOLD,this._classesToPreserve=this.CLASSES_TO_PRESERVE.concat(e.classesToPreserve||[]),this._root=e.root,this.websiteConfig={},this._flags=this.FLAG_STRIP_UNLIKELYS|this.FLAG_WEIGHT_CLASSES|this.FLAG_CLEAN_CONDITIONALLY,this._debug?this.log=function(){var t=["[CLEARY/PARSE] ",`(${arguments.callee.caller.name})`].concat(Array.from(arguments));console.debug.apply(console,t)}:this.log=function(){}}Clearly.prototype={FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,ELEMENT_NODE:1,TEXT_NODE:3,DEFAULT_MAX_ELEMS_TO_PARSE:0,DEFAULT_N_TOP_CANDIDATES:5,DEFAULT_TAGS_TO_SCORE:"section,h2,h3,h4,h5,h6,p,td,pre".toUpperCase().split(","),DEFAULT_CHAR_THRESHOLD:500,REGEXPS:{unlikelyCandidates:/-ad-|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|foot|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|main|shadow/i,positive:/article|body|feature|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story|photo|progressive|summary/gi,negative:/hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|foot|footer|footnote|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|tool|thumbnail|icon|emoji|widget|avatar|author|small|mini|user|footer|player|controls|button|newsletter|photoviewer-overlay|amphtml-intrinsic-sizer/gi,extraneous:/print|archive|comment|discuss|e[-]?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,imagePositive:/hero|presentation|gallary|cover|head|flipboard|slide|post|responsive/gi,imageNegative:/icon|logo|button|btn|material|amphtml-intrinsic-sizer/gi,videos:/\/\/(www\.)?((dailymotion|youtube|youtube-nocookie|player\.vimeo|v\.qq)\.com|(archive|upload\.wikimedia)\.org|player\.twitch\.tv)/i,nextLink:/(next|weiter|continue|>([^|]|$)|»([^|]|$))/i,prevLink:/(prev|earl|old|new|<|«)/i,whitespace:/^\s*$/,hasContent:/\S$/},DIV_TO_P_ELEMS:["A","BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL","SELECT"],ALTER_TO_DIV_EXCEPTIONS:["DIV","ARTICLE","SECTION","P"],PRESENTATIONAL_ATTRIBUTES:["align","background","bgcolor","border","cellpadding","cellspacing","frame","hspace","rules","style","valign","vspace"],DEPRECATED_SIZE_ATTRIBUTE_ELEMS:["TABLE","TH","TD","HR","PRE"],PHRASING_ELEMS:["CANVAS","IFRAME","ABBR","AUDIO","B","BDO","BR","BUTTON","CITE","CODE","DATA","DATALIST","DFN","EM","EMBED","I","IMG","INPUT","KBD","LABEL","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PROGRESS","Q","RUBY","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","VAR","WBR"],LANG_REGEXPS:{en:/[a-zA-Z]/gi,"zh-CN":/[\u4e00-\u9fa5]/gi,hi:/[\u0900-\u097F]/gi,ar:/[\u0621-\u064A\u0660-\u0669]/gi,bn:/[\u0995-\u09B9\u09CE\u09DC-\u09DF\u0985-\u0994\u09BE-\u09CC\u09D7\u09BC]/gi,he:/[\u0590-\u05FF]/gi,ru:/[\wа-я]+/gi,ja:/[\u3040-\u309F]/gi,ko:/[\uac00-\ud7af]|[\u1100-\u11ff]|[\u3130-\u318f]|[\ua960-\ua97f]|[\ud7b0-\ud7ff]/gi,it:/[àèéìíîòóùúÀÈÉÌÍÎÒÓÙÚ]/gi,es:/[áéíñóúüÁÉÍÑÓÚÜ]/gi,pl:/[a-pr-uwy-zA-PR-UWY-ZąćęłńóśźżĄĆĘŁŃÓŚŹŻ]/gi,de:/[äöüßÄÖÜẞ]/gi,fr:/[àâäôéèëêïîçùûüÿæœÀÂÄÔÉÈËÊÏÎŸÇÙÛÜÆŒ]/gi},WEBSITE_CONFIG:{"nytimes.com/":{authorName:[".last-byline"],ignoreElements:["[data-testid=photoviewer-overlay]"]},"medium.com/":{authorName:[".pw-author a"]},"tumblr.com/":{authorName:[/"author":"(.*?)"/]},"zhuanlan.zhihu.com/":{authorName:[".AuthorInfo-content .UserLink-link"]},"jianshu.com/":{contentElem:"section article",authorName:["section span a"]},"csdn.net/":{contentElem:"article",authorName:[".follow-nickName"]},"techcrunch.com/":{authorName:[".article__byline a"]},"digitaltrends.com/":{authorName:["a.author"]},"theverge.com/":{authorName:[".c-byline__author-name"]},"nbcnews.com/":{authorName:[".byline-name a"]},"huffpost.com/":{authorName:[".entry-wirepartner__byline"]},"reuters.com/":{authorName:["[rel=author]"]},"cnn.com/":{authorName:[".metadata__byline__author a"]},"foxnews.com/":{authorName:[".author-byline a"]},"washingtonpost.com/":{authorName:["a.author-name"]},"wsj.com/":{authorName:["a.author-name"]},"abcnews.go.com/":{authorName:[".Byline__Author"]},"bbc.com/":{authorName:["article header strong"]},"mashable.com/":{contentElem:"main article",authorName:["h1 ~ div .underline-link"]},"vox.com/":{authorName:[".c-byline__author-name"]},"cnet.com/":{authorName:[".c-globalAuthor_link"]},"engadget.com/":{authorName:['[data-component="VerticalAuthorInfo"] a[class*=engadgetSteelGray]']},"entertainment14.net/":{titleElem:".entry-title",contentElem:".entry-content"},"mp.weixin.qq.com/":{authorName:[".rich_media_meta_text"],contentElem:".rich_media_content "},"sspai.com/":{authorName:[".nickname"]},"woshipm.com/":{authorName:[".ui-captionStrong"]},"36kr.com/":{authorName:[".title-icon-item"]},"infzm.com/":{authorName:[".nfzm-content__author"]},"cnbeta.com/":{authorName:[".source"]},"huxiu.com/":{authorName:[".author-info__username"]},"sciencedirect.com/":{contentElem:"article"},"wattpad.com/":{contentElem:".part-content pre"},"pcmag.com/":{contentElem:"article"},"cntraveler.com/gallery":{contentElem:'[data-attribute-verso-pattern="gallery-body"]'}},DELAY_IMAGE_ATTRIBUTES:["data-src","datasrc","data-src","data-hi-res-src","data-original-src","data-origin","data-origin-src","data-lazyload","data-lazyload-src","data-lazy-src","data-original","data-src-medium","data-src-large","data-src-mini","_src"],CLASSES_TO_PRESERVE:["page","hljs",/^hljs-.*/],_postProcessContent:function(t){this.log("_postProcessContent",t),this._fixRelativeUris(t),this._processAttributes(t),this._removeEmptyNodes(t),this._removeDuplicates(t)},getWebsiteConfig(t){const e=Object.keys(this.WEBSITE_CONFIG).find(e=>t.includes(e));return this.WEBSITE_CONFIG[e]||{}},_removeDuplicates:function(t){var e=[];this._removeNodes(t.querySelectorAll("img,svg"),t=>{var i=t.getAttribute("src");if(i&&e.includes(i)){if(this._hasAncestorTag(t,"figure",3)){const e=this._getNodeAncestors(t,3);for(var n=0;n<e.length;n++)if("FIGURE"===e[n].tagName){this.log("_removeDuplicates start",e[n].outerHTML),e[n].parentNode.removeChild(e[n]);break}}return!0}return e.push(i),!1})},_removeEmptyNodes:function(t){let e=this._getNextNode(t);for(;e;)this._hasContent(e,!1)||(e.parentNode.removeChild(e),this.log("_removeEmptyNodes",e.outerHTML)),e=this._getNextNode(e);let i=t;for(this.log(i);1===i.childNodes.length&&3!==i.childNodes[0].nodeType;)i.innerHTML=i.childNodes[0].innerHTML;this.log("_removeEmptyNodes after",t.outerHTML)},getPathTo(t){if(""!==t.id)return'id("'+t.id+'")';if(t===document.body)return t.tagName;for(var e=0,i=t.parentNode.childNodes,n=0;n<i.length;n++){var r=i[n];if(r===t)return this.getPathTo(t.parentNode)+"/"+t.tagName+"["+(e+1)+"]";1===r.nodeType&&r.tagName===t.tagName&&e++}},getByPath:t=>document.evaluate(t,document,null,window.XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue,_getCoverPhoto(){var t=["img","svg"].concat(this.DELAY_IMAGE_ATTRIBUTES.map(function(t){return"["+t+"]"})).join(",");let e=0,i=null;return this.log("_getCoverPhoto",t),this._forEachNode(this._doc.querySelectorAll(t),t=>{const{width:n,realWidth:r,url:a}=this.getPhotoSize(t);this.log("_getCoverPhoto",n,r,t),(n>e||r>e)&&(e=n,i=a)}),!!(e>500&&i)&&(i.startsWith("//")?i=this._doc.baseURI.split(":").shift()+":"+i:i.startsWith("http")||(i=this._toAbsoluteURI(i)),i)},_removeNodes:function(t,e){for(var i=t.length-1;i>=0;i--){var n=t[i],r=n.parentNode;r&&(e&&!e.call(this,n,i,t)||(this.log("_removeNodes",n),r.removeChild(n)))}},_replaceNodeTags:function(t,e){for(var i=t.length-1;i>=0;i--){var n=t[i];this._setNodeTag(n,e)}},_forEachNode:function(t,e){Array.prototype.forEach.call(t,e,this)},_someNode:function(t,e){return Array.prototype.some.call(t,e,this)},_everyNode:function(t,e){return Array.prototype.every.call(t,e,this)},_concatNodeLists:function(){var t=Array.prototype.slice,e=t.call(arguments).map(function(e){return t.call(e)});return Array.prototype.concat.apply([],e)},_getAllNodesWithTag:function(t,e){return t.querySelectorAll?t.querySelectorAll(e.join(",")):[].concat.apply([],e.map(function(e){var i=t.getElementsByTagName(e);return Array.isArray(i)?i:Array.from(i)}))},_processAttributes:function(t){var e=(t.getAttribute("class")||"").split(/\s+/).filter(t=>-1!==this._classesToPreserve.indexOf(t)||this._classesToPreserve.some(e=>e instanceof RegExp&&e.test(t))).join(" ");for(["P","DIV","SPAN","STRONG","TABLE","UL","LI","ARTICLE","MAIN"].includes(t.tagName)&&this._cleanAttributes(t),"IMG"===t.tagName&&this._cleanAttributes(t,["src","alt","srcset"]),"A"===t.tagName&&this._cleanAttributes(t,["href","title","target","rel"]),e?t.setAttribute("class",e):t.removeAttribute("class"),t=t.firstElementChild;t;t=t.nextElementSibling)this._processAttributes(t)},_cleanAttributes:function(t,e){for(var i=t.attributes.length;i--;){var n=t.attributes[i];e&&e.includes(n.name)||t.removeAttribute(n.name)}},_buildOutline:function(t){var e=t.querySelectorAll("h1,h2,h3,h4,h5,h6"),i=[];return this._forEachNode(e,t=>{var e="ros-"+(this._outlineIndex+1);t.setAttribute("class","ros"),t.setAttribute("id",e),i.push({id:e,level:parseInt(t.tagName.substr(1),10),type:t.tagName.toLowerCase(),title:t.textContent}),this._outlineIndex++}),i},_buildLinks:function(t){var e=t.querySelectorAll("a"),i=[];return this._forEachNode(e,t=>{const e=t.getAttribute("href"),n=t.textContent&&t.textContent.trim()||"";!e||!n||n.startsWith("http")||!e.startsWith("http")||n.length<=12||i.some(t=>t.url.toLowerCase()===e.toLowerCase())||i.push({title:t.textContent.trim().replace(/[\u00A0-\u9999<>&]/g,function(t){return"&#"+t.charCodeAt(0)+";"}),type:"text",url:e,alt:t.getAttribute("alt")})}),i},_toAbsoluteURI:function(t){var e=this._doc.baseURI;if(e===this._doc.documentURI&&"#"===t.charAt(0))return t;try{return new URL(t,e).href}catch(t){}return t},_fixRelativeUris:function(t){var e=t.getElementsByTagName("a");this._forEachNode(e,t=>{var e=t.getAttribute("href");if(e)if(0===e.indexOf("javascript:")){var i=this._doc.createTextNode(t.textContent);t.parentNode.replaceChild(i,t)}else t.setAttribute("href",this._toAbsoluteURI(e))});var i=t.querySelectorAll("img,picture>source");this._forEachNode(i,t=>{var e=t.getAttribute("src");e&&!e.startsWith("data:")&&(t.setAttribute("src",this._toAbsoluteURI(e)),t.setAttribute("crossorigin","*"));for(const e of this.DELAY_IMAGE_ATTRIBUTES){const i=t.getAttribute(e);i&&(t.setAttribute("src",this._toAbsoluteURI(i)),t.setAttribute("crossorigin","*"))}const i=t.getAttribute("data-cell-options");if(i){console.log("dataCellOptions",i);try{const e=JSON.parse(i);e&&e.src&&(t.setAttribute("src",this._toAbsoluteURI(e.src)),t.setAttribute("crossorigin","*")),this.log("imgDataCellOptions process ok",t,e.src)}catch(t){this.log("imgDataCellOptions parse error",t)}}const n=t.getAttribute("srcset");n&&t.setAttribute("srcset",n.split(", ").map(t=>{const e=String(t).trim().split(" ");return e[0].startsWith("http")||e[0].startsWith("data:")?t:(e[0]=this._toAbsoluteURI(e[0]),e.join(" "))}).join(", "))});var n=t.querySelectorAll("div[data-src],span[data-original]");this._forEachNode(n,function(t){var e=t.getAttribute("data-src")||t.getAttribute("data-original");if(!t.innerHTML&&e){var i=document.createElement("img");i.src=e,i.crossorigin="*",t.parentNode.replaceChild(i,t)}})},_getArticleTitle:function(){if(this.websiteConfig.titleElem){const t=document.querySelector(this.websiteConfig.titleElem);if(t)return t.innerText}var t=this._doc,e="",i="";try{"string"!=typeof(e=i=String(t.title||"").trim())&&(e=i=this._getInnerText(t.getElementsByTagName("title")[0]))}catch(t){}var n=!1;function r(t){return t.split(/\s+/).length}if(/ [|\-\\/>»] /.test(e))n=/ [\\/>»] /.test(e),r(e=i.replace(/(.*)[|\-\\/>»] .*/gi,"$1"))<3&&(e=i.replace(/[^|\-\\/>»]*[|\-\\/>»](.*)/gi,"$1"));else if(-1!==e.indexOf(": ")){var a=this._concatNodeLists(t.getElementsByTagName("h1"),t.getElementsByTagName("h2")),s=String(e||"").trim();this._someNode(a,function(t){return String(t.textContent||"").trim()===s})||(r(e=i.substring(i.lastIndexOf(":")+1))<3?e=i.substring(i.indexOf(":")+1):r(i.substr(0,i.indexOf(":")))>5&&(e=i))}else if(e.length>150||e.length<15){var o=t.getElementsByTagName("h1");1===o.length&&(e=this._getInnerText(o[0]))}var l=r(e=String(e||"").trim());return l<=4&&(!n||l!==r(i.replace(/[|\-\\/>»]+/g,""))-1)&&(e=i),e},_prepDocument:function(){var t=this._doc;this.websiteConfig=this.getWebsiteConfig(this._doc.baseURI),this._findAuthor(),this._removeNodes(t.getElementsByTagName("style")),this._removeUnused(),t.body&&this._replaceBrs(t.body),this._replaceNodeTags(t.getElementsByTagName("font"),"SPAN")},_removeUnused:function(){this._removeNodes(this._doc.querySelectorAll(".prettyprint .pre-numbering"));const t=this.websiteConfig.ignoreElements||[];for(const e of t)this._removeNodes(this._doc.querySelectorAll(e)),this.log("_removeUnused ignoreElements",e)},_findAuthor:function(){var t=this.websiteConfig.authorName||[];for(let n of t)if("string"==typeof n){var e=this._doc.querySelector(n);e&&(this._articleAuthorName=e.innerText)}else if(n instanceof RegExp){var i=this._doc.innerHTML.match(n);i&&i[1]&&(this._articleAuthorName=i[1])}},_nextElement:function(t){for(var e=t;e&&e.nodeType!==this.ELEMENT_NODE&&this.REGEXPS.whitespace.test(e.textContent);)e=e.nextSibling;return e},_replaceBrs:function(t){this._forEachNode(this._getAllNodesWithTag(t,["br"]),function(t){for(var e=t.nextSibling,i=!1;(e=this._nextElement(e))&&"BR"===e.tagName;){i=1;var n=e.nextSibling;e.parentNode.removeChild(e),e=n}if(i||!this._hasAncestorTag(t,"code",2)&&!this._hasAncestorTag(t,"pre",2)||(i=2),1===i){var r=this._doc.createElement("p");for(t.parentNode.replaceChild(r,t),e=r.nextSibling;e;){if("BR"===e.tagName){var a=this._nextElement(e.nextSibling);if(a&&"BR"===a.tagName)break}if(!this._isPhrasingContent(e))break;var s=e.nextSibling;r.appendChild(e),e=s}for(;r.lastChild&&this._isWhitespace(r.lastChild);)r.removeChild(r.lastChild);"P"===r.parentNode.tagName&&this._setNodeTag(r.parentNode,"DIV")}else 2===i&&t.parentNode.replaceChild(document.createTextNode("\n"),t)})},_setNodeTag:function(t,e){if(this.log(t,e),t.__JSDOMParser__)return t.localName=e.toLowerCase(),t.tagName=e.toUpperCase(),t;for(var i=t.ownerDocument.createElement(e);t.firstChild;)i.appendChild(t.firstChild);t.parentNode.replaceChild(i,t),t.Clearly&&(i.Clearly=t.Clearly);for(var n=0;n<t.attributes.length;n++)try{i.setAttribute(t.attributes[n].name,t.attributes[n].value)}catch(t){}return i},_prepArticle:function(t){this._cleanStyles(t),this._markDataTables(t),this._cleanConditionally(t,"form"),this._cleanConditionally(t,"fieldset"),this._clean(t,"object"),this._clean(t,"embed"),this._clean(t,"h1"),this._clean(t,"footer"),this._clean(t,"link"),this._clean(t,"aside"),this._clean(t,"canvas"),this._forEachNode(t.children,function(t){this._cleanMatchedNodes(t,/share/)});var e=t.getElementsByTagName("h2");if(1===e.length){var i=(e[0].textContent.length-this._articleTitle.length)/this._articleTitle.length;if(Math.abs(i)<.5){(i>0?e[0].textContent.includes(this._articleTitle):this._articleTitle.includes(e[0].textContent))&&this._clean(t,"h2")}}this._clean(t,"iframe"),this._clean(t,"input"),this._clean(t,"textarea"),this._clean(t,"select"),this._clean(t,"button"),this._cleanHeaders(t),this._coverUrl=this._getCoverPhoto(t),this.log("try get getCoverPhoto",this._coverUrl),this._cleanConditionally(t,"table"),this._cleanConditionally(t,"ul"),this._cleanConditionally(t,"div"),this._cleanImg(t),this._cleanNoscript(t),this._removeNodes(t.getElementsByTagName("p"),function(t){return 0===t.getElementsByTagName("img").length+t.getElementsByTagName("embed").length+t.getElementsByTagName("object").length+t.getElementsByTagName("iframe").length&&!this._getInnerText(t,!1)}),this._forEachNode(this._getAllNodesWithTag(t,["br"]),function(t){var e=this._nextElement(t.nextSibling);e&&"P"===e.tagName&&t.parentNode.removeChild(t)}),this._forEachNode(this._getAllNodesWithTag(t,["table"]),function(t){var e=this._hasSingleTagInsideElement(t,"TBODY")?t.firstElementChild:t;if(this._hasSingleTagInsideElement(e,"TR")){var i=e.firstElementChild;if(this._hasSingleTagInsideElement(i,"TD")){var n=i.firstElementChild;n=this._setNodeTag(n,this._everyNode(n.childNodes,this._isPhrasingContent)?"P":"DIV"),t.parentNode.replaceChild(n,t)}}})},_initializeNode:function(t){switch(t.Clearly={contentScore:0},t.tagName){case"DIV":t.Clearly.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":t.Clearly.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":t.Clearly.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":t.Clearly.contentScore-=5}t.Clearly.contentScore+=this._getClassWeight(t)},_removeAndGetNext:function(t){var e=this._getNextNode(t,!0);return t.parentNode.removeChild(t),e},_getNextNode:function(t,e){if(!e&&t.firstElementChild)return t.firstElementChild;if(t.nextElementSibling)return t.nextElementSibling;do{t=t.parentNode}while(t&&!t.nextElementSibling);return t&&t.nextElementSibling},_checkByline:function(t,e){if(this._articleByline)return!1;if(void 0!==t.getAttribute)var i=t.getAttribute("rel");return!("author"!==i&&!this.REGEXPS.byline.test(e)||!this._isValidByline(t.textContent))&&(this._articleByline=String(t.textContent||"").trim(),!0)},_getNodeAncestors:function(t,e){e=e||0;for(var i=0,n=[];t.parentNode&&(n.push(t.parentNode),!e||++i!==e);)t=t.parentNode;return n},_grabArticle:function(t){const e=this._doc;var i=null!==t;t=t||this._doc.body;let n=null;if(this.websiteConfig.contentElem&&(n=this._doc.documentElement.querySelector(this.websiteConfig.contentElem))){this._ignoreCleanConditionally=!0,this.log("HTML specificCotnentElem",this.websiteConfig.contentElem,n.cloneNode(!0));let t=e.createElement("DIV");for(let e=0;e<n.childNodes.length;e++)t.innerHTML=n.outerHTML;return this._prepArticle(t),t}if(!t)return this.log("NO BODY FOUND IN DOCUMENT, ABORT."),null;var r=t.innerHTML;for(this.log("START",r);;){for(var a=this._flagIsActive(this.FLAG_STRIP_UNLIKELYS),s=[],o=this._doc.documentElement;o;){var l=o.className+" "+o.id;if(this._checkByline(o,l))this.log("REMOVE BYLINE",o),o=this._removeAndGetNext(o);else if(!a||this._hasAncestorTag(o,"code")||this._hasAncestorTag(o,"pre")||!this.REGEXPS.unlikelyCandidates.test(l)||this.REGEXPS.okMaybeItsACandidate.test(l)||"BODY"===o.tagName||"A"===o.tagName||this._hasElement(o,"a"))if("DIV"!==o.tagName&&"SECTION"!==o.tagName&&"HEADER"!==o.tagName&&"H1"!==o.tagName&&"H2"!==o.tagName&&"H3"!==o.tagName&&"H4"!==o.tagName&&"H5"!==o.tagName&&"H6"!==o.tagName||!this._isElementWithoutContent(o)||this._hasDelayImageContainer(o)){if(-1!==this.DEFAULT_TAGS_TO_SCORE.indexOf(o.tagName)&&s.push(o),"DIV"===o.tagName&&!this._isDelayImageContainer(o)){for(var h=null,c=o.firstChild;c;){var g=c.nextSibling;if(this._isPhrasingContent(c))null!==h?h.appendChild(c):this._isWhitespace(c)||(h=e.createElement("p"),o.replaceChild(h,c),h.appendChild(c));else if(null!==h){for(;h.lastChild&&this._isWhitespace(h.lastChild);)h.removeChild(h.lastChild);h=null}c=g}if(this._hasSingleTagInsideElement(o,"P")&&this._getLinkDensity(o)<.25){var u=o.children[0];o.parentNode.replaceChild(u,o),o=u,s.push(o)}else this._hasChildBlockElement(o)||(o=this._setNodeTag(o,"P"),s.push(o))}o=this._getNextNode(o)}else this.log("REMOVE EMPTY CONTENT",o),o=this._removeAndGetNext(o);else this.log("REMOVE UNLIKELY CANDIDATE",o),o=this._removeAndGetNext(o)}var d=[];this._forEachNode(s,function(t){if(t.parentNode&&void 0!==t.parentNode.tagName){var e=this._getInnerText(t);if(!(e.length<25)){var i=this._getNodeAncestors(t,3);if(0!==i.length){var n=0;n+=1,n+=e.split(",").length,n+=Math.min(Math.floor(e.length/100),3),this._forEachNode(i,function(t,e){if(t.tagName&&t.parentNode&&void 0!==t.parentNode.tagName){if(void 0===t.Clearly&&(this._initializeNode(t),d.push(t)),0===e)var i=1;else i=1===e?2:3*e;t.Clearly.contentScore+=n/i}})}}}});for(var m=[],_=0,f=d.length;_<f;_+=1){var N=d[_],E=N.Clearly.contentScore*(1-this._getLinkDensity(N));N.Clearly.contentScore=E;for(var p=0;p<this._nbTopCandidates;p++){var A=m[p];if(!A||E>A.Clearly.contentScore){m.splice(p,0,N),m.length>this._nbTopCandidates&&this.log("Remove topCandidate:",E,A.Clearly.contentScore,m.pop());break}}}var T,b=m[0]||null,v=!1;if(null===b||"BODY"===b.tagName){b=e.createElement("DIV"),v=!0;for(var C=t.childNodes;C.length;)this.log("THROW CHILD",C[0]),b.appendChild(C[0]);t.appendChild(b),this._initializeNode(b)}else if(b){for(var y=[],S=1;S<m.length;S++)m[S].Clearly.contentScore/b.Clearly.contentScore>=.75&&y.push(this._getNodeAncestors(m[S]));if(y.length>=3)for(T=b.parentNode;T&&"BODY"!==T.tagName;){for(var I=0,L=0;L<y.length&&I<3;L++)I+=Number(y[L].includes(T));if(I>=3){b=T;break}T=T.parentNode}b.Clearly||this._initializeNode(b),T=b.parentNode;for(var R=b.Clearly.contentScore,D=R/3;T&&"BODY"!==T.tagName;)if(T.Clearly){var x=T.Clearly.contentScore;if(x<D)break;if(x>R){b=T;break}R=T.Clearly.contentScore,T=T.parentNode}else T=T.parentNode;for(T=b.parentNode;"BODY"!==T.tagName&&1===T.children.length;)T=(b=T).parentNode;b.Clearly||this._initializeNode(b)}let n=e.createElement("DIV");i&&(n.id="clearly-content");for(var B=Math.max(10,.2*b.Clearly.contentScore),O=(T=b.parentNode).children,P=0,w=O.length;P<w;P++){var G=O[P],M=!1;if(this.log("SIBLING",G,G.Clearly?"with score "+G.Clearly.contentScore:""),this.log("SIBLING SCORE",G.Clearly?G.Clearly.contentScore:"Unknown",b),G===b)M=!0;else{var U=0;if(G.className===b.className&&""!==b.className&&(U+=.2*b.Clearly.contentScore),G.Clearly&&G.Clearly.contentScore+U>=B)M=!0;else if("P"===G.nodeName){var H=this._getLinkDensity(G),k=this._getInnerText(G),F=k.length;F>80&&H<.25?M=!0:F<80&&F>0&&0===H&&-1!==k.search(/\.( |$)/)?M=!0:["FIGURE","PICTURE"].includes(G.nodeName)&&this._hasDelayImageContainer(G)&&(M=!0)}}M&&(this.log("SIBLING APPEND",G),-1===this.ALTER_TO_DIV_EXCEPTIONS.indexOf(G.nodeName)&&(this.log("SIBLING ALTER",G,"to div."),G=this._setNodeTag(G,"DIV")),n.appendChild(G),P-=1,w-=1)}if(this.log("HTML AFTER CLEAN",n.cloneNode(!0)),this._prepArticle(n),this.log("HTML AFTER PREP",n.cloneNode(!0)),v)b.id="clearly-page-1",b.className="clearly-page";else{var W=e.createElement("DIV");W.id="clearly-page-1",W.className="clearly-page";for(var V=n.childNodes;V.length;)W.appendChild(V[0]);n.appendChild(W)}this.log("HTML AFTER PAGING",n.cloneNode(!0));var Y=!0,X=this._getInnerText(n,!0).length;if(X<this._charThreshold)if(Y=!1,t.innerHTML=r,this._flagIsActive(this.FLAG_STRIP_UNLIKELYS))this._removeFlag(this.FLAG_STRIP_UNLIKELYS),this._attempts.push({articleContent:n,textLength:X});else if(this._flagIsActive(this.FLAG_WEIGHT_CLASSES))this._removeFlag(this.FLAG_WEIGHT_CLASSES),this._attempts.push({articleContent:n,textLength:X});else if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY))this._removeFlag(this.FLAG_CLEAN_CONDITIONALLY),this._attempts.push({articleContent:n,textLength:X});else{if(this._attempts.push({articleContent:n,textLength:X}),this._attempts.sort(function(t,e){return t.textLength<e.textLength}),!this._attempts[0].textLength)return this.log("MAX TRIES LIMIT"),null;n=this._attempts[0].articleContent,Y=!0}if(Y){var j=[T,b].concat(this._getNodeAncestors(T));return this._someNode(j,function(t){if(!t.tagName)return!1;var e=t.getAttribute("dir");return!!e&&(this._articleDir=e,!0)}),n}}},_cleanNoscript(t){var e=t.getElementsByTagName("noscript");this._forEachNode(e,t=>{var e=t.textContent.trim();if(this.log("check noscript",e),!e.startsWith("<img "))return;const i=t.parentNode;if(t.previousSibling&&!("IMG"!==t.previousSibling.tagName||t.previousSibling.getAttribute("src")&&t.previousSibling.getAttribute("src").startsWith("http"))){const n=document.createElement("span");n.innerHTML=e,i.replaceChild(n,t.previousSibling),i.removeChild(t),this.log("replace noscript",n,t,t.previousSibling)}}),this._clean(t,"noscript")},_isValidByline:function(t){return("string"==typeof t||t instanceof String)&&((t=String(t||"").trim()).length>0&&t.length<100)},_getArticleMetadata:function(){var t={},e={},i=this._doc.getElementsByTagName("meta"),n=/\s*(dc|dcterm|og|twitter)\s*:\s*(author|creator|description|title)\s*/gi,r=/^\s*(?:(dc|dcterm|og|twitter|weibo:(article|webpage))\s*[.:]\s*)?(author|creator|description|title)\s*$/i;return this._forEachNode(i,function(t){var i=t.getAttribute("name"),a=t.getAttribute("property"),s=t.getAttribute("content"),o=null,l=null;if(a&&(o=a.match(n)))for(var h=o.length-1;h>=0;h--)l=o[h].toLowerCase().replace(/\s/g,""),e[l]=String(s||"").trim();!o&&i&&r.test(i)&&(l=i,s&&(l=l.toLowerCase().replace(/\s/g,"").replace(/\./g,":"),e[l]=String(s||"").trim()))}),t.title=e["dc:title"]||e["dcterm:title"]||e["og:title"]||e["weibo:article:title"]||e["weibo:webpage:title"]||e.title||e["twitter:title"],t.title||(t.title=this._getArticleTitle()),t.byline=e["dc:creator"]||e["dcterm:creator"]||e.author,t.excerpt=e["dc:description"]||e["dcterm:description"]||e["og:description"]||e["weibo:article:description"]||e["weibo:webpage:description"]||e.description||e["twitter:description"],t},_removeScripts:function(t){this._removeNodes(t.getElementsByTagName("script"),function(t){return t.nodeValue="",t.removeAttribute("src"),!0})},_hasSingleTagInsideElement:function(t,e){return 1===t.children.length&&t.children[0].tagName===e&&!this._someNode(t.childNodes,function(t){return t.nodeType===this.TEXT_NODE&&this.REGEXPS.hasContent.test(t.textContent)})},_hasElement:function(t,e){return!!this._someNode(t.childNodes,function(t){return t.nodeName.toLowerCase()===e.toLowerCase()&&this.REGEXPS.hasContent.test(t.textContent)})},_isElementWithoutContent:function(t){return t.nodeType===this.ELEMENT_NODE&&0===String(t.textContent||"").trim().length&&(0===t.children.length||t.children.length===t.getElementsByTagName("br").length+t.getElementsByTagName("hr").length)},_isDelayImageContainer:function(t){return this.DELAY_IMAGE_ATTRIBUTES.some(function(e){return t.hasAttribute(e)})},_hasDelayImageContainer:function(t){var e=this.DELAY_IMAGE_ATTRIBUTES.map(function(t){return"["+t+"]"}).join(",")+",img";return t.querySelectorAll(e).length>0},_hasChildBlockElement:function(t){return this._someNode(t.childNodes,function(t){return-1!==this.DIV_TO_P_ELEMS.indexOf(t.tagName)||this._hasChildBlockElement(t)})},_isPhrasingContent:function(t){return t.nodeType===this.TEXT_NODE||-1!==this.PHRASING_ELEMS.indexOf(t.tagName)||("A"===t.tagName||"DEL"===t.tagName||"INS"===t.tagName)&&this._everyNode(t.childNodes,this._isPhrasingContent)},_isWhitespace:function(t){return t.nodeType===this.TEXT_NODE&&0===String(t.textContent||"").trim().length||t.nodeType===this.ELEMENT_NODE&&"BR"===t.tagName},_hasContent:function(t){return!!this._getInnerText(t,!1)||!!t.getElementsByTagName("img")},_getInnerText:function(t,e){e=void 0===e||e;var i=String(t.textContent||"").trim();return e?i.replace(this.REGEXPS.normalize," "):i},_getInnerPhotos:function(t){var e=["img","svg"].concat(this.DELAY_IMAGE_ATTRIBUTES.map(function(t){return"["+t+"]"})).join(",");let i=0;return this._forEachNode(t.querySelectorAll(e),t=>{this.isRealPhoto(t)&&i++}),i},isRealPhoto:function(t){if(this._isDelayImageContainer(t))return!0;const e=this.getPhotoSize(t);return!!Object.values(e).find(t=>t>300)},getPhotoSize:function(t){var e=Object.values(t.attributes).map(t=>t.nodeName),i=e.find(t=>t.includes("width")),n=e.find(t=>t.includes("height")),r=t.clientWidth,a=t.clientHeight;let s=0,o=0,l=t.getAttribute("src");if(i&&(r=parseInt(t.getAttribute(i),10)||r),n&&(a=parseInt(t.getAttribute(n),10)||a),"svg"===t.tagName&&t.hasAttribute("viewBox")){const[,,e,i]=t.getAttribute("viewBox").split(" ");e&&(r=parseInt(e,10)),i&&(a=parseInt(i,10))}if(t.hasAttribute("src")&&t.complete&&(o=t.naturalHeight,s=t.naturalWidth),t.getAttribute("srcset")){const e=t.getAttribute("srcset").split(",").reduce((t,e)=>{let[i,n]=e.trim().split(" ");return(n=parseInt(n))>t.width?{width:n,url:i}:t},{width:0,url:""});e&&e.url&&(r=e.width,l=e.url)}return{width:r,height:a,realWidth:s,realHeight:o,url:l}},_getCharCount:function(t,e){return e=e||",",this._getInnerText(t).split(e).length-1},_cleanStyles:function(t){if(t&&"svg"!==t.tagName.toLowerCase()){for(var e=0;e<this.PRESENTATIONAL_ATTRIBUTES.length;e++)t.removeAttribute(this.PRESENTATIONAL_ATTRIBUTES[e]);-1!==this.DEPRECATED_SIZE_ATTRIBUTE_ELEMS.indexOf(t.tagName)&&(t.removeAttribute("width"),t.removeAttribute("height"));for(var i=t.firstElementChild;null!==i;)this._cleanStyles(i),i=i.nextElementSibling}},_getLinkDensity:function(t){var e=this._getInnerText(t).length;if(0===e)return 0;var i=0;return this._forEachNode(t.getElementsByTagName("a"),function(t){i+=this._getInnerText(t).length}),i/e},_getClassWeight:function(t){if(!this._flagIsActive(this.FLAG_WEIGHT_CLASSES))return 0;var e=0,i=(t.className||"")+":"+(t.id||"");if(t.className||t.id){var n=i.match(this.REGEXPS.negative);n&&(e-=25*n.length);var r=i.match(this.REGEXPS.positive);r&&(e+=25*r.length),["SVG","IMG"].includes(t.tagName.toUpperCase())&&(this.REGEXPS.imageNegative.test(t.className)&&(e-=25),this.REGEXPS.imagePositive.test(t.className)&&(e+=25))}return e},_clean:function(t,e){var i=-1!==["object","embed","iframe","video"].indexOf(e);this.log("_clean",e,i),this._removeNodes(t.getElementsByTagName(e),function(t){if(i){var e=[].map.call(t.attributes,function(t){return t.value}).join("|");if(this.REGEXPS.videos.test(e))return!1;if(this.REGEXPS.videos.test(t.innerHTML))return!1}return!0})},_hasPhotoContainer:function(t){return this._hasAncestorTag(t,"figure")||this._hasAncestorTag(t,"picture")},_hasAncestorTag:function(t,e,i,n){i=i||3,e=e.toUpperCase();for(var r=0;t.parentNode;){if(i>0&&r>i)return!1;if(t.parentNode.tagName===e&&(!n||n(t.parentNode)))return!0;t=t.parentNode,r++}return!1},_getRowAndColumnCount:function(t){for(var e=0,i=0,n=t.getElementsByTagName("tr"),r=0;r<n.length;r++){var a=n[r].getAttribute("rowspan")||0;a&&(a=parseInt(a,10)),e+=a||1;for(var s=0,o=n[r].getElementsByTagName("td"),l=0;l<o.length;l++){var h=o[l].getAttribute("colspan")||0;h&&(h=parseInt(h,10)),s+=h||1}i=Math.max(i,s)}return{rows:e,columns:i}},_markDataTables:function(t){for(var e=t.getElementsByTagName("table"),i=0;i<e.length;i++){var n=e[i];if("presentation"!==n.getAttribute("role"))if("0"!==n.getAttribute("datatable"))if(n.getAttribute("summary"))n._ClearlyDataTable=!0;else{var r=n.getElementsByTagName("caption")[0];if(r&&r.childNodes.length>0)n._ClearlyDataTable=!0;else{if(["col","colgroup","tfoot","thead","th"].some(function(t){return!!n.getElementsByTagName(t)[0]}))this.log("DATA TABLE BECAUSE FOUND DATA-Y DESCENDANT"),n._ClearlyDataTable=!0;else if(n.getElementsByTagName("table")[0])n._ClearlyDataTable=!1;else{var a=this._getRowAndColumnCount(n);a.rows>=10||a.columns>4?n._ClearlyDataTable=!0:n._ClearlyDataTable=a.rows*a.columns>10}}}else n._ClearlyDataTable=!1;else n._ClearlyDataTable=!1}},_cleanImg:function(t){this.log("_cleanImg start",t);var e=["img","svg"].concat(this.DELAY_IMAGE_ATTRIBUTES.map(function(t){return"["+t+"]"})).join(",");this._removeNodes(t.querySelectorAll(e),t=>{var e=t.hasAttribute("data-srcset")||t.hasAttribute("srcset"),i=t.nodeName.toUpperCase();if(e||this._isDelayImageContainer(t))return!1;var n=this._getClassWeight(t);if(this.log("_cleanImg executed executed with weight",n,0,t),n+0<0)return!0;if(this._hasPhotoContainer(t))return!1;if(["IMG","SVG"].includes(i)){let e=!1;if(this._root&&t.hasAttribute("src")&&(e=!0,t=this._root.querySelector(`${t.tagName.toLowerCase()}[src="${t.getAttribute("src")}"]`)),t.hasAttribute("src")&&t.complete)return!!(e&&(t.naturalWidth<250||t.naturalHeight<250||t.naturalHeight/t.naturalWidth>3||t.naturalHeight/t.naturalWidth<.2)||t.getAttribute("width")&&t.getAttribute("width")<100||t.getAttribute("height")&&t.getAttribute("height")<100)&&(this.log("_cleanImg after load",t,t.naturalWidth,t.naturalHeight,t),!0);var r=Object.values(t.attributes).map(t=>t.nodeName),a=r.find(t=>t.includes("width")),s=r.find(t=>t.includes("height")),o=t.clientWidth,l=t.clientHeight;if(a&&(o=parseInt(t.getAttribute(a),10)||o),s&&(l=parseInt(t.getAttribute(s),10)||l),"SVG"===i&&t.hasAttribute("viewBox")){const[,,e,i]=t.getAttribute("viewBox").split(" ");e&&(o=parseInt(e,10)),i&&(l=parseInt(i,10))}if(o<=250&&l<=250||l/o>3||l/o<.33)return this.log("_cleanImg base attrs",t.naturalWidth,t.clientHeight,t),!0}return!1})},_cleanConditionally:function(t,e){if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY)&&!this._ignoreCleanConditionally){var i="ul"===e||"ol"===e;this._removeNodes(t.getElementsByTagName(e),function(t){if(this._hasAncestorTag(t,"table",-1,function(t){return t._ClearlyDataTable}))return!1;var e=this._getClassWeight(t);if(this._getCharCount(t,",")<10){for(var n=t.getElementsByTagName("p").length||t.getElementsByTagName("td").length||t.getElementsByTagName("th").length,r=t.getElementsByTagName("img").length,a=t.getElementsByTagName("li").length-100,s=t.getElementsByTagName("input").length,o=0,l=t.getElementsByTagName("embed"),h=0,c=l.length;h<c;h+=1)this.REGEXPS.videos.test(l[h].src)||(o+=1);var g=this._getLinkDensity(t),u=this._getInnerText(t).length,d=r>1&&n/r<.5||i&&!u&&!r||!i&&a>n||s>Math.floor(n/3)||!i&&u<25&&(0===r||r>2)||!i&&0===r&&e<25&&g>.2||e>=25&&g>.5||1===o&&u<75||o>1;return d&&this.log("CLEANCONDITIONALLY BY RULES",{img:r,isList:i,contentLength:u,p:n,li:a,linkDensity:g,weight:e,embedCount:o},t),d}return e+0<0&&(this.log("CLEANCONDITIONALLY BY SCORE",e+0,t),!0)})}},_cleanMatchedNodes:function(t,e){for(var i=this._getNextNode(t,!0),n=this._getNextNode(t);n&&n!==i;)e.test(n.className+" "+n.id)?(this.log("REMOVE BY REGEX",e,n),n=this._removeAndGetNext(n)):n=this._getNextNode(n)},_cleanHeaders:function(t){for(var e=1;e<3;e+=1)this._removeNodes(t.getElementsByTagName("h"+e),function(t){return this._getClassWeight(t)<0})},_flagIsActive:function(t){return(this._flags&t)>0},_removeFlag:function(t){this._flags=this._flags&~t},_isRealVisible:function(t){var e=window.getComputedStyle(t);return"none"!==e.display&&"hidden"!==e.visibility&&e.opacity>0&&!t.hasAttribute("hidden")},_isProbablyVisible:function(t){return!(t.style&&"none"===t.style.display||t.hasAttribute("hidden"))},isNodeVisible:function(t){return(!t.style||"none"!==t.style.display)&&!t.hasAttribute("hidden")&&(!t.hasAttribute("aria-hidden")||"true"!==t.getAttribute("aria-hidden")||t.className&&t.className.indexOf&&-1!==t.className.indexOf("fallback-image"))},isProbablyReaderable:function(t,e){t=t||this._doc,"function"==typeof e&&(e={visibilityChecker:e});var i={minScore:20,minContentLength:140,visibilityChecker:this.isNodeVisible};e=Object.assign(i,e);var n=this._doc.querySelectorAll("p, pre, article"),r=this._doc.querySelectorAll("div > br");if(r.length){var a=new Set(n);[].forEach.call(r,function(t){a.add(t.parentNode)}),n=Array.from(a)}var s=0;return[].some.call(n,t=>{if(!e.visibilityChecker(t))return!1;var i=t.className+" "+t.id;if(this.REGEXPS.unlikelyCandidates.test(i)&&!this.REGEXPS.okMaybeItsACandidate.test(i))return!1;if(t.matches("li p"))return!1;var n=t.textContent.trim().length;return!(n<e.minContentLength)&&(s+=Math.sqrt(n-e.minContentLength))>e.minScore})},wordsDetect:function(t,e={}){const i={words:[],count:0};if(!t)return i;let n=String(t);if(""===n.trim())return i;const r=e.punctuationAsBreaker?" ":"",a=e.disableDefaultPunctuation?[]:[",","，",".","。",":","：",";","；","[","]","【","]","】","{","｛","}","｝","(","（",")","）","<","《",">","》","$","￥","!","！","?","？","~","～","'","’",'"',"“","”","*","/","\\","&","%","@","#","^","、","、","、","、"],s=e.punctuation||[];a.concat(s).forEach(function(t){const e=new RegExp("\\"+t,"g");n=n.replace(e,r)}),n=(n=(n=(n=n.replace(/[\uFF00-\uFFEF\u2000-\u206F]/g,"")).replace(/\s+/," ")).split(" ")).filter(t=>t.trim());const o=new RegExp("(\\d+)|[À-ÿĀ-ſƀ-ɏɐ-ʯḀ-ỿЀ-ӿԀ-ԯഀ-ൿ]+|[⺀-⻿⼀-⿟　-〿㇀-㇯㈀-㋿㌀-㏿㐀-㿿䀀-䶿一-俿倀-忿怀-濿瀀-翿耀-迿退-鿿豈-﫿぀-ゟ゠-ヿㇰ-ㇿ㆐-㆟ᄀ-ᇿ㄰-㆏ꥠ-꥿가-꿿뀀-뿿쀀-쿿퀀-힯ힰ-퟿]","g");let l=[];return n.forEach(function(t){const e=[];let i;do{(i=o.exec(t))&&e.push(i[0])}while(i);0===e.length?l.push(t):l=l.concat(e)}),{words:l,count:l.length}},detectLanguage(t,e){if(this.log("detectLanguage",e),e&&"en"!==e&&"en-US"!==e)return e;t=t.replace(/[.,/#!$%^&*;:{}=\-_`~()\s]/g,"");const i=[];for(const[e,n]of Object.entries(this.LANG_REGEXPS)){let r=(t.match(n)||[]).length/t.length;if(r){if(r>.85)return e;i[e]=r}}return this.log("detectLanguage",i),Object.keys(i).reduce((t,e)=>i[t]>i[e]?t:e)},parse:function(){if(this._maxElemsToParse>0){var t=this._doc.getElementsByTagName("*").length;if(t>this._maxElemsToParse)throw new Error("Aborting parsing document; "+t+" elements found")}var e="rtl"===this._doc.querySelector("html").getAttribute("dir"),i=String(this._doc.querySelector("html").getAttribute("lang")||"en-US");this._prepDocument(),this._removeScripts(this._doc);var n=this._getArticleMetadata();this._articleTitle=n.title;var r=this._grabArticle(),a=r&&r.textContent?r.textContent.trim():"";if(!a||a.length<100&&r.querySelectorAll("img").length<2)return null;this.log("HTML GRAB",r.cloneNode(!0)),this._postProcessContent(r),this.log("HTML PROCESS",r.cloneNode(!0));var s=this._buildOutline(r),o=this._buildLinks(r);if(!n.excerpt){var l=r.getElementsByTagName("p");l.length>0&&(n.excerpt=String(l[0].textContent||"").trim())}var h=r.textContent,c=r.innerHTML.includes(this._coverUrl)?null:this._coverUrl;const{count:g}=this.wordsDetect(h),u=g/3.5;return{url:r.baseURI,title:this._articleTitle,coverUrl:c,byline:n.byline||this._articleByline,dir:this._articleDir,content:"<article>"+r.innerHTML+"</article>",textContent:h,length:h.length,readSeconds:u,readTime:Math.floor(u/60)+":"+String(Math.round(u%60)).padStart(2,"0"),wordsCount:g,excerpt:n.excerpt,outline:s,links:o,authorName:this._articleAuthorName,hostname:new URL(this._doc.baseURI).hostname,rtl:e,lang:this.detectLanguage(h,i)}}},"object"==typeof module&&(module.exports=Clearly);